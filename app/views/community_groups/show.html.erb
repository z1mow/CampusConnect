<!DOCTYPE html>
<html lang="en">
<head>
  <style>
    .group-container {
      max-width: 800px;
      margin: 20px auto;
      padding: 1rem;
    }
    .group-header {
      background: white;
      border-radius: 12px;
      padding: 2rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 4px 16px rgba(31, 38, 135, 0.07);
    }
    .group-title {
      color: #2c3e50;
      font-size: 2em;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    .group-title i {
      color: #00B5AD;
    }
    .group-info {
      color: #7f8c8d;
      font-size: 1.1em;
      margin-bottom: 1.5rem;
    }
    .group-description {
      color: #34495e;
      font-size: 1em;
      line-height: 1.6;
      margin-bottom: 2rem;
    }
    .group-stats {
      display: flex;
      gap: 2rem;
      margin-bottom: 2rem;
    }
    .stat-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: #95a5a6;
    }
    .stat-item i {
      color: #00B5AD;
    }
    .action-buttons {
      display: flex;
      gap: 1rem;
      margin-top: 2rem;
    }
    .action-buttons > * {
      flex: 1;
    }
    .chat-button {
      background: linear-gradient(135deg, #00B5AD 0%, #009c95 100%) !important;
      color: white !important;
      padding: 1rem 2rem !important;
      border-radius: 8px !important;
      transition: all 0.3s ease !important;
      flex: 1;
    }
    .chat-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 181, 173, 0.2);
    }
    .back-button {
      background: white !important;
      color: #00B5AD !important;
      border: 1px solid #00B5AD !important;
      padding: 1rem 2rem !important;
      border-radius: 8px !important;
      transition: all 0.3s ease !important;
    }
    .back-button:hover {
      background: rgba(0, 181, 173, 0.05) !important;
      transform: translateY(-2px);
    }
    .members-section {
      background: white;
      border-radius: 12px;
      padding: 2rem;
      box-shadow: 0 4px 16px rgba(31, 38, 135, 0.07);
    }
    .members-title {
      color: #2c3e50;
      font-size: 1.5em;
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .members-title i {
      color: #00B5AD;
    }
    .members-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 1rem;
    }
    .member-item {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      padding: 0.8rem;
      background: #f8f9fa;
      border-radius: 8px;
      transition: all 0.2s ease;
    }
    .member-item:hover {
      transform: translateY(-2px);
      background: #f1f2f3;
    }
    .member-avatar {
      width: 36px;
      height: 36px;
      background: #00B5AD;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1;
    }
    .member-avatar i {
      color: white;
      font-size: 16px;
      margin: 0;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
    }
    .member-name {
      color: #2c3e50;
      font-weight: 500;
    }
    .creator-badge {
      background: rgba(0, 181, 173, 0.1);
      color: #00B5AD;
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      font-size: 0.8em;
      margin-left: auto;
    }
    .leave-button {
      background: white !important;
      color: #e74c3c !important;
      border: 1px solid #e74c3c !important;
      padding: 1rem 2rem !important;
      border-radius: 8px !important;
      transition: all 0.3s ease !important;
    }
    .leave-button:hover {
      background: #e74c3c !important;
      color: white !important;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(231, 76, 60, 0.2);
    }
    .join-button {
      background: linear-gradient(135deg, #00B5AD 0%, #009c95 100%) !important;
      color: white !important;
      border: none !important;
      padding: 1rem 2rem !important;
      border-radius: 8px !important;
      font-size: 1.1em !important;
      font-weight: 500 !important;
      letter-spacing: 0.5px !important;
      transition: all 0.3s ease !important;
      width: auto !important;
      display: inline-flex !important;
      align-items: center !important;
      gap: 0.8rem !important;
      box-shadow: 0 4px 15px rgba(0, 181, 173, 0.2) !important;
    }
    .join-button:hover {
      transform: translateY(-2px) !important;
      box-shadow: 0 6px 20px rgba(0, 181, 173, 0.3) !important;
      background: linear-gradient(135deg, #00c4bb 0%, #00a8a0 100%) !important;
    }
    .join-button:active {
      transform: translateY(0) !important;
      box-shadow: 0 2px 10px rgba(0, 181, 173, 0.2) !important;
    }
    .join-button i {
      font-size: 1.2em !important;
      margin-right: 0.2rem !important;
    }
    .delete-button {
      background: white !important;
      color: #e74c3c !important;
      border: 1px solid #e74c3c !important;
      padding: 1rem 2rem !important;
      border-radius: 8px !important;
      transition: all 0.3s ease !important;
      margin-right: 1rem !important;
    }
    .delete-button:hover {
      background: #e74c3c !important;
      color: white !important;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(231, 76, 60, 0.2);
    }
  </style>
</head>
<body>
  <div class="group-container">
    <div class="group-header">
      <h1 class="group-title">
        <i class="users icon"></i>
        <%= @community_group.name %>
      </h1>
      
      <div class="group-stats">
        <div class="stat-item">
          <i class="user icon"></i>
          <%= pluralize(@members.count, 'üye') %>
        </div>
        <div class="stat-item">
          <i class="comments icon"></i>
          <%= pluralize(@messages.count, 'mesaj') %>
        </div>
      </div>

      <% if @community_group.description.present? %>
        <div class="group-description">
          <%= @community_group.description %>
        </div>
      <% end %>

      <div class="action-buttons">
        <% if current_user.member_of?(@community_group) %>
          <% if current_user == @community_group.creator %>
            <%= button_to community_group_path(@community_group), 
                method: :delete,
                class: "ui button delete-button",
                data: { confirm: "Bu grubu silmek istediğinize emin misiniz? Bu işlem geri alınamaz ve tüm üyeler gruptan çıkarılacaktır." } do %>
              <i class="trash icon"></i>
              Grubu Sil
            <% end %>
          <% elsif current_user != @community_group.creator %>
            <%= button_to leave_community_group_path(@community_group), 
                method: :delete,
                class: "ui button leave-button",
                data: { confirm: "Bu gruptan ayrılmak istediğinize emin misiniz?" } do %>
              <i class="sign-out icon"></i>
              Gruptan Ayrıl
            <% end %>
          <% end %>
          <%= link_to community_group_chatroom_path(@community_group), class: "ui button chat-button" do %>
            <i class="comments icon"></i>
            Sohbete Katıl
          <% end %>
        <% else %>
          <%= button_to join_community_group_path(@community_group), 
              method: :post, 
              class: "ui button join-button" do %>
            <i class="plus circle icon"></i>
            Gruba Katıl
          <% end %>
        <% end %>
        <%= link_to community_groups_path, class: "ui button back-button" do %>
          <i class="arrow left icon"></i>
          Geri Dön
        <% end %>
      </div>
    </div>

    <div class="members-section">
      <h2 class="members-title">
        <i class="users icon"></i>
        Grup Üyeleri
      </h2>
      <div class="members-list">
        <% @members.each do |member| %>
          <div class="member-item">
            <div class="member-avatar">
              <i class="user icon"></i>
            </div>
            <div class="member-name">
              <%= member.username %>
            </div>
            <% if member == @community_group.creator %>
              <div class="creator-badge">Kurucu</div>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</body>
</html>
